<header>
    <h1>Search Results</h1>
    <table id="search-params">
        <tbody>
            <tr>
                <td>Route:</td>
                <td>{{ params.fromStation }} - {{ params.toStation }}</td>
            </tr>
                <td>Time Period:</td>
                <td>{{ params.days }} between {{ params.fromDate.format("DD MMM YYYY") }} - {{ params.toDate.format("DD MMM YYYY") }}</td>
            <tr>
                <td>Delay:</td>
                <td>{{ params.delay.asMinutes() }} minutes or more</td>
            </tr>
        </tbody>
    </table>
</header>

<main [ngSwitch]="state">
    <!-- Loading icon -->
    <div *ngSwitchCase="stateEnum.RequestingMetrics" class="splash" >
        Loading...
    </div>
    <!-- Error icon -->
    <div *ngSwitchCase="stateEnum.Error" class="splash" >
        Error!
    </div>
    <div *ngSwitchCase="stateEnum.RequestingDetails" >

        <!-- Results controls -->
        <label>Hide On-Time Journeys:</label>
        <input type="checkbox" [(ngModel)]="isHideTimely" >

        <!-- Results Table -->
        <table id="results" [hidden]="(state == stateEnum.RequestingMetrics)" [class.hide-on-time]="isHideTimely" >
            <thead id="header-row">
                <tr>
                    <th>Date</th>
                    <th>Scheduled Departure</th>
                    <th>Scheduled Arrival</th>
                    <th>Actual Arrival</th>
                    <th>Cancellation/Delay Reason</th>
                </tr>
            </thead>
            <tbody>
                <tr class="result-row" *ngFor="let journey of journeys"
                                       [ngClass]="[journey.requestClass, journey.delayClass]"
                                       (click)="onSelect(journey)" >
                    <td>{{ journey.date.format("D MMM YYYY") }}</td>
                    <td>{{ journey.scheduledDeparture.format("HH:mm") }}</td>
                    <td>{{ journey.scheduledArrival.format("HH:mm") }}</td>
                    <td>{{ journey?.actualArrival?.format("HH:mm") }}</td>
                    <td>{{ journey?.disruptionCode }}</td>
                </tr>
            </tbody>
        </table>

        <!-- Results Detail -->
        <aside id="details">
            <journey-detail [journey]="selectedJourney"></journey-detail>
        </aside>
    </div>
</main>